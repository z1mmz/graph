<!DOCTYPE html>
<html>
  <head>
    <title>Photon</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="./photon-0.1.2-dist/css/photon.css">

    <!-- Electron Javascript -->
    <script>
      var $ = jQuery = require('./jquery-2.2.4.min.js');
    </script>
    <script src="./sigma/build/sigma.min.js"></script>
    <script src="./sigma/build/plugins/sigma.parsers.json.min.js"></script>
    <script src="./sigma/build/plugins/sigma.layout.forceAtlas2.min.js"></script>
  </head>
  <style>
  #container {
  position: absolute;
  width: 100%;
  height: 100%;
}
  </style>

  <body>
    <!-- Wrap your entire app inside .window -->
    <div class="window">
      <!-- Your app's content goes inside .window-content -->
      <div class="window-content">
        <div class="padded-more">
          <div id="graph"></div>
          <div id="container"></div>
          <script>
          var fs = require("fs");
          var fileConts = fs.readFileSync("./data.json",'utf8')
          var json = JSON.parse(fileConts);
          console.log(json);


    var s = new sigma({
      graph: null,
      container: 'container'
    },
    function(s) {
      // We first need to save the original colors of our
      // nodes and edges, like this:
      s.graph.nodes().forEach(function(n) {
        n.originalColor = n.color;
      });
      s.graph.edges().forEach(function(e) {
        e.originalColor = e.color;
      });
    s.bind('clickNode', function(e) {
        var nodeId = e.data.node.id,
            toKeep = s.graph.neighbors(nodeId);
        toKeep[nodeId] = e.data.node;

        s.graph.nodes().forEach(function(n) {
          if (toKeep[n.id])
            n.color = n.originalColor;
          else
            n.color = '#eee';
        });
      });
    });

    var N = 50;
    var E = 500;
    for (i = 0; i < N; i++){
      s.graph.addNode({
        id: 'n' + i,
        label: 'Node ' + i,
        x: Math.random() * 1000,
        y: Math.random() * 1000,
        size: Math.random()
      });
    }


  for(i = 0 ; i < s.graph.nodes().length ; i++){
    var rand = i;
    while(rand == i){
      rand = Math.floor(Math.random() * (s.graph.nodes().length - 1) + 0);

    }
    console.log(rand);
    s.graph.addEdge({
      id: 'e'+ i,
      source: 'n'+ i,
      target: 'n'+ rand,
      weight: Math.floor(Math.random() * (s.graph.nodes().length - 1) + 0)
      });
      setTimeout(2000);

      s.refresh();

  }



    s.refresh();
    // s.graph.read(json);
  // sigma.parsers.json("data.json", {
  //   container: 'container',
  //   settings: {
  //     defaultNodeColor: '#ec5148'
  //   }
  // });
</script>

        </div>
      </div>
    </div>
  </body>
</html>
